{% load static %}

<html>
<head>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
   integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <link rel="preconnect" href="https://fonts.gstatic.com">

  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css2?family=Happy+Monkey&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <link rel="preconnect" href="https://fonts.gstatic.com">

  <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.gstatic.com">

  <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
   integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" 
   crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" 
  integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
   crossorigin="anonymous"></script> 

  

  <link rel="stylesheet" href="{% static 'style.css' %}">
  
  <link rel = "icon" href ="{% static 'images/sitelogovector.svg' %}" type = "image/x-icon" >
  
  
<title>joBoard</title> 

</head>

<body>

    <div class="menu">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        menu
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">Upload CV</a>
            <a class="dropdown-item" href="#">Submissions tracking</a>
            <a class="dropdown-item" href="#">Salary tables</a>
        </div>
        {% if user.is_authenticated %}
            <button onclick="location.href='{% url 'accounts:account' %}'" class="btn btn-sm btn-outline-secondary" type="button">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-door-open" fill="currentColor"
            xmlns="http://www.w3.org/2000/svg">


            <path fill-rule="evenodd"
            d="M1 15.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zM11.5
            2H11V1h.5A1.5 1.5 0 0 1 13 2.5V15h-1V2.5a.5.5 0 0 0-.5-.5z"/>


            <path fill-rule="evenodd"
            d="M10.828.122A.5.5 0 0 1 11 .5V15h-1V1.077l-6
            .857V15H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117z"/>

            <path d="M8 9c0 .552.224 1 .5 1s.5-.448.5-1-.224-1-.5-1-.5.448-.5 1z"/>
            </svg> My Account </button>

            <button onclick="location.href='{% url 'logout' %}'" class="btn btn-sm btn-outline-secondary"
            type="button"><svg width="1em" height="1em" viewBox="0 0 16 16"
            class="bi bi-person-plus-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0
            0 6zm7.5-3a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1
            0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
            </svg> Log out </button>

		{% else %}
            <button onclick="location.href='{% url 'login' %}'" class="btn btn-sm btn-outline-secondary" type="button">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-door-open" fill="currentColor"
            xmlns="http://www.w3.org/2000/svg">


            <path fill-rule="evenodd"
            d="M1 15.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zM11.5
            2H11V1h.5A1.5 1.5 0 0 1 13 2.5V15h-1V2.5a.5.5 0 0 0-.5-.5z"/>


            <path fill-rule="evenodd"
            d="M10.828.122A.5.5 0 0 1 11 .5V15h-1V1.077l-6
            .857V15H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117z"/>

            <path d="M8 9c0 .552.224 1 .5 1s.5-.448.5-1-.224-1-.5-1-.5.448-.5 1z"/>
            </svg> Sign In </button>

            <button onclick="location.href='{% url 'accounts:signup' %}'" class="btn btn-sm btn-outline-secondary"
            type="button"><svg width="1em" height="1em" viewBox="0 0 16 16"
            class="bi bi-person-plus-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0
            0 6zm7.5-3a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1
            0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
            </svg>Sign Up</button>
        {% endif %}
    </div>
    <h1> Available jobs  </h1>
  
  
    {% if job_posts == "no relevant jobs for you" %}
	<div class="no_job">
        <p>Unfortunately there are no results matching your search..<br> Letâ€™s try again</p>
        <button class="search-btn" type="submit" onclick="history.back()" ><i class="fas fa-search"></i>
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-search"
            fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
            d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"/>
            <path fill-rule="evenodd"
            d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
            </svg>search again
        </button>
	</div>
	
    {% else %}
	<div class="showSearch">
	
        <div class = "the_jobs">
            <table>
                {% for item in job_posts %}
                <tr>
                    <td>
                        <button class="user-action-btn" type="button"  
                            data-name = "{{ item.job_name }}"
                            data-company = "{{ item.company_id }}"
                            data-city = "{{ item.job_city_id }}"
                            data-type = "{{ item.job_type_id }}"
                            data-scope = "{{ item.job_scope }}"
                            data-description = "{{ item.job_description }}"
                            data-url = "{{ item.job_URL }}">{{ item.job_name }}
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
		
        <div id = "job_details">
		
            <p id="info_name"></p>
			
            <table>
                <tr>
                    <td>
                        <p id="info_company"></p>
                    </td>
                    <td>
                        <p id="info_city"></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p id="info_type"></p>
                    </td>
                    <td>
                        <p id="info_scope"></p>
                    </td>
                </tr>
            </table>
			
            <p id="info_description"></p>

            <button class="btn"> <a id="apply" href ="#">Apply Now</a></button>
        </div>
		
    </div>

    {% endif %}

</body>

<script>
    var classname = document.getElementsByClassName("user-action-btn");
    for (var i = 0; i < classname.length; i++) {
        classname[i].addEventListener('click', insertVariable);
     }

    function insertVariable(e) {
        var name = this.getAttribute("data-name");
        var company = this.getAttribute("data-company");
        var city = this.getAttribute("data-city");
        var type = this.getAttribute("data-type");
        var scope = this.getAttribute("data-scope");
        var description = this.getAttribute("data-description");
        var url = this.getAttribute("data-url");
        printVariables(name, company, city, type, scope, description, url);
     }
	
	function printVariables(name, company, city, type, scope, description, url){
        document.getElementById("job_details").style.display = "block";
        document.getElementById("apply").href = url;
        document.getElementById("info_name").innerHTML = name;
        document.getElementById("info_company").innerHTML = "Company: " + company;
        document.getElementById("info_city").innerHTML = "Loacation: " + city;
        document.getElementById("info_type").innerHTML = "Type: " + type;
        document.getElementById("info_scope").innerHTML = "Scope: " + scope;
        document.getElementById("info_description").innerHTML = "Description: " + description;
	}

</script>

<footer class="footer">
      <div class="footerdiv">
         <a class="text-muted">All right reserved to joBoard - job's search engine </a>
      </div>
</footer>

</html>